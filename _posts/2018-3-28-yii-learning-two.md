---
layout: post
title: Yii框架的学习记录(二)
date: 2018-3-28 20:10:00
categories: Yii
tags: 框架
---

* content
{:toc}

经过几天的学习，我对Yii框架也有了一点了解。许多人总想要通过看框架的源码来学习框架，大多时候这样做都是费力不讨好的。就像使用洗衣机一样，连说明书都没看懂，就去研究它的内部原理，这听起来
荒谬而又可笑。然而，有时当我们对于框架中的某个方法不甚了解，或者对某个参数的用途不太清楚时，看框架的源码却能帮我们了解这个方法，毕竟，框架进行良好的封装后，暴露的接口是简洁明了的。而
在大部分的框架源码之上，对这些接口会有相应的注释，尤其是PHP语言编写的框架。






## Yii的组件
Yii框架中有着各种各样的组件，这些组件可以帮我们智能生成诸如表单、筛选器、各式各样的dom元素等等，这看上去似乎方便了开发者去编写代码，但我在实际使用中却感觉不太良好。可能是因为我对Yii的组件
不太熟悉，用这些组件生成界面时，我总是感觉很不舒服，尤其是这些组件通过Model的instance生成，让我感觉整个逻辑分外的混乱。当参数的某个部分出现问题时，竟然会导致界面报错？wtf!!数据不应当影响界面
显示的成功与否才对。尤其是，这些组件的元素依赖于model，而model的参数时常会有相互的依赖，整个前后端就混在了一起，导致了后端出现问题，前端也会出现问题；且前端简单的界面编写也因为后端的引用
而变得分外复杂。因此，我不太喜欢Yii的这种通过组件生成界面的方式，前后端应当隔离开来。

Yii的编写中，我访问的最多的是Model文件，Model文件对应数据库中的表(当然,也可以不对应),Model中定义了查询数据库的方法，你也可以通过hasMany、hasOne等方法做多表查询，这种方式很有趣。当你创建了
一个Model的instance，你通过访问该instance中的属性就能找到该实例在其它表中对应的实例，而实例又可以去寻找更多的实例，这种方式对于多表查询来说是很方便的，而且逻辑比较清楚。如果单纯使用SQL语句，
用起来可能会更复杂一点。Model的属性访问也很有意思，你不必定义属性，你只需要在model中写一个方法:get+属性名称(大驼峰)，接着在别的地方使用$model->属性名称(小驼峰)，就能访问这个属性了。
	
	class Model{
	public function getRegion(){
	   ....// action
	}
	}
	$ins = new Model;
	print_r($ins->region);
	
当然，这个和PHP变量的特性有关，但是写多了C语言和JAVA之后，你会发现这种方式会让你有点不习惯==


## MYSQL的级联
在以前，我设计数据表项的时候，会想到外键和主键的对应关系，然而我不会在数据库的外键中去设置，原因在于我不太理解设置外键的作用。因此所谓的外键其实只是被我用来做多表查询而已。但今天，我删除数据时想，
如果表的主键数据被删除了，那么该主键对应表的外键的数据也应当被删除才对，因为那行数据已经失效了。我们可以自己去写SQL语句实现相应的删除，但是很麻烦。而如果我们为表的对应项设置上外键，那么当该外键
对应的主键行被delete/update时，该外键对应的行就会自动delete/update，既方便又安全啊！这就是主键和外键的级联，有时候，我们多了解一些方法，就可以省很多事。
**需要注意的是：要设置外键，需要先为外键设置好索引，且外键和主键对应的表必须要高度一致.**




